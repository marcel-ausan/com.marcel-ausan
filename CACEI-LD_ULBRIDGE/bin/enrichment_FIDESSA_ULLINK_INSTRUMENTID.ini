[rules]
rule_0 = EQ (isin+mic+ccy)
rule_1 = Future (using underlying-instrument-id and maturity-date-full)
rule_2 = Future (using underlying-instrument-id)
rule_3 = Option  (using local-code and maturity-date-full)
rule_4 = Option  (using local-code)
rule_5 = Future (using product-code and maturity-date-full)
rule_6 = Future (using product-code)
rule_7 = Option (using product-code and maturity-date-full)
rule_8 = Option (using product-code)
rule_9 = Option on Future ((using underlying-instrument-id and maturity-date-full))
rule_10 = Option on Future ((using underlying-instrument-id))

[rules/rule_0/properties]
type = standard

[rules/rule_0/result]
real_found = real
fungible_found = preferred_real

[rules/rule_0/search]
condition = if (true)
ULFLOW.request.plugin = ODS
ULFLOW.request.timeout = 100
ISINCODE = isin-code
CURRENCY = price-currency
EXDESTINATION = trading-venue, mapping_0

[rules/rule_1/properties]
type = standard

[rules/rule_1/result]
real_found = real
fungible_found = fungible

[rules/rule_1/search]
condition = if not empty($MATURITYDATE)
ULFLOW.request.plugin = ODS
ULFLOW.request.timeout = 100
SYMBOL = underlying-instrument-code
MATURITYDATE = maturity-date-full
EXDESTINATION = trading-venue, mapping_0
CURRENCY = price-currency
CFICODE = cfi-code

[rules/rule_2/properties]
type = standard

[rules/rule_2/result]
real_found = real
fungible_found = next_rule

[rules/rule_2/search]
condition = if (true)
ULFLOW.request.plugin = ODS
ULFLOW.request.timeout = 100
SYMBOL = underlying-instrument-code
MATURITYMONTHYEAR = maturity-date
EXDESTINATION = trading-venue, mapping_0
CURRENCY = price-currency
CFICODE = cfi-code

[rules/rule_3/properties]
type = standard

[rules/rule_3/result]
real_found = real
fungible_found = fungible

[rules/rule_3/search]
condition = if not empty($MATURITYDATE)
ULFLOW.request.plugin = ODS
ULFLOW.request.timeout = 100
SYMBOL = local-code
MATURITYDATE = maturity-date-full
STRIKEPRICE = strike-price
PUTORCALL = put-or-call
CURRENCY = price-currency
EXDESTINATION = trading-venue, mapping_0

[rules/rule_4/properties]
type = standard

[rules/rule_4/result]
real_found = real
fungible_found = next_rule

[rules/rule_4/search]
condition = if (true)
ULFLOW.request.plugin = ODS
ULFLOW.request.timeout = 100
SYMBOL = local-code
MATURITYMONTHYEAR = maturity-date
STRIKEPRICE = strike-price
PUTORCALL = put-or-call
CURRENCY = price-currency
EXDESTINATION = trading-venue, mapping_0

[rules/rule_5/properties]
type = standard

[rules/rule_5/result]
real_found = real
fungible_found = fungible

[rules/rule_5/search]
condition = if not empty($MATURITYDATE)
ULFLOW.request.plugin = ODS
ULFLOW.request.timeout = 100
EXCHANGECODE = product-code
MATURITYDATE = maturity-date-full
CURRENCY = price-currency
CFICODE = cfi-code
EXDESTINATION = trading-venue, mapping_0

[rules/rule_6/properties]
type = standard

[rules/rule_6/result]
real_found = real
fungible_found = next_rule

[rules/rule_6/search]
condition = if (true)
ULFLOW.request.plugin = ODS
ULFLOW.request.timeout = 100
EXCHANGECODE = product-code
MATURITYMONTHYEAR = maturity-date
CURRENCY = price-currency
CFICODE = cfi-code
EXDESTINATION = trading-venue, mapping_0

[rules/rule_7/properties]
type = standard

[rules/rule_7/result]
real_found = real
fungible_found = fungible

[rules/rule_7/search]
condition = if not empty($MATURITYDATE)
ULFLOW.request.plugin = ODS
ULFLOW.request.timeout = 100
EXCHANGECODE = product-code
STRIKEPRICE = strike-price
CURRENCY = price-currency
EXDESTINATION = trading-venue, mapping_0
MATURITYDATE = maturity-date-full

[rules/rule_8/properties]
type = standard

[rules/rule_8/result]
real_found = real
fungible_found = next_rule

[rules/rule_8/search]
condition = if (true)
ULFLOW.request.plugin = ODS
ULFLOW.request.timeout = 100
EXCHANGECODE = product-code
STRIKEPRICE = strike-price
CURRENCY = price-currency
EXDESTINATION = trading-venue, mapping_0
MATURITYMONTHYEAR = maturity-date

[rules/rule_9/properties]
type = standard

[rules/rule_9/result]
real_found = real
fungible_found = fungible

[rules/rule_9/search]
condition = if not empty($MATURITYDATE)
ULFLOW.request.plugin = ODS
ULFLOW.request.timeout = 100
SYMBOL = underlying-instrument-code
MATURITYDATE = maturity-date-full
STRIKEPRICE = strike-price
PUTORCALL = put-or-call
CURRENCY = price-currency
EXDESTINATION = trading-venue, mapping_0

[rules/rule_10/properties]
type = standard

[rules/rule_10/result]
real_found = real
fungible_found = next_rule

[rules/rule_10/search]
condition = if (true)
ULFLOW.request.plugin = ODS
ULFLOW.request.timeout = 100
SYMBOL = underlying-instrument-code
MATURITYMONTHYEAR = maturity-date
STRIKEPRICE = strike-price
PUTORCALL = put-or-call
CURRENCY = price-currency
EXDESTINATION = trading-venue, mapping_0

[mappings]
mapping_0 = ExchangeMapping

[mapping/mapping_0]
XPAR = XPAR|XMAT|XMON|
PR = XPRA|
HK = XHKF|XHKG|
CME = XCME|GLBX|
IM = XDMI|
TFX = XTKS|
IS = XIST|
CMX = XCEC|
NYSE_Liffe = XMAT|
MIL = XDMI|
AS = XAMS|
RE = XBSE|
AT = XATH|
AU = XASX|
XNMS = XNAS|XNMS|
XLIF = XLIF|IFEU|
BB = XBRD|
IFLO = IFEU|
JO = XOSE|
F = XFRA|
I = XDUB|
J = XJSE|
JT = XTKS|
IFLX = IFEU|
L = XLON|XLOM|AIMX|
XLON = XLOM|AIMX|
N = ARXC|XNYS|
SA = XSAF|
O = XNAS|
BDP = MFOX|
P = XNYS|
BR = XBRU|
XCBO = XCBF|OPRA|
S = XSWX|
SFE = XSFE|XASX|
BU = XBUD|
SF = XASX|
Z = BATS|
SM = XMRV|
SP = XSIM|
SS = XSTO|
ST = XSTO|FNSE|
CD = XASX|
ECAG = XEUR|
SW = XEUR|
COP = XCSE|
ASX = XASX|
LIF = XLIF|IFEU|
ICE = IFEU|
CO = XCSE|XFND|
ICF = IFEU|
CY = XCYS|
TO = XTSE|
XMEF = XMRV|
IFLL = IFEU|
DC = XCSE|
DE = XETR|
LN = XLIF|IFEU|
SGX = XSIM|
LS = XLIS|
BFO = XBRD|
UE = OPRA|XCBF|
OPQ = OPRA|
MC = XMAD|XMCE|
UO = OPRA|XCBF|
MI = XMIL|MTAA|ETFP|SEDX|
US = OPRA|CBOE|
XNYM = XCEC|
HKG = XHKF|
EUX = XEUR|
MX = XMEX|
VI = WBAH|XWBO|
NA = XEUE|
XFRA = XETR|
SAF = XSAF|
TCM = XTKS|
NO = XOSL|
FH = XHEL|
VX = XVTX|
CBF = XCBF|
FP = XMON|XMAT|
WA = XWAR|
CBO = XCBO|
CBT = XCBT|
MFM = XMRV|
NYB = IFUS|
EOE = XEUE|
NYF = IFUS|
OL = XOSL|
OSE = XOSE|
OSD = XOSL|
NYM = XNYM|
SSE = XSTO|
OBX = XOSL|
EOP = XMON|XMAT|
XCME = XCME|XCBT|GLBX|XCEC|
MGE = XMGE|
GR = XEUR|
PA = XPAR|XMLI|ALXP|
WCE = IFCA|
HEX = XHEL|
HE = XHEL|FNFI|

[convert-currencies]
GBP = True
ILS = False
ZAR = True
USD = True
AUD = False

[enrich-tags]
EXCHANGECODEETI = etilocalcode
LEGEXCHANGECODEETI = etilocalcode
MATURITYDATE = maturity-date-full
MATURITYMONTHYEAR = maturity-date
OPTATTRIBUTE = time-issue
EXCHANGECODE = liffe-exchangecode
PRODUCTCODE = product-code
UNDERLINE.CODE = underlying-local-code
PUTORCALL = put-or-call
EUREX_CONTRACTVERSION = eurex-contractversion
ULCFICODE = cfi-code
ETILOCALCODE = etilocalcode
SECURITYEXCHANGE = trading-venue
EXDESTINATION = trading-venue
CURRENCY = price-currency
SECURITYTYPE = security-type
EUREX = eurex
LEGEXCHANGECODE = liffe-exchangecode
INITIALMARGIN = margin-per-contract
LIFFE_DISPLAYPRECISION = displayprecision
LEGPRICE = legprice
STRIKEPRICE = strike-price
CFICODE = cfi-code
EXPIRATIONDATE = idc-expiration-date
ISINCODE = isin-code
REALCODE = local-code
INSTRUMENTEXPIRYDATE = maturity-date-full
ULTYPE = type
SYMBOL = symbol
LEGUNDERLINECODE = underlying-local-code
LIFFE = liffe
CLOSINGPRICE = closing-price
UNDERLYINGDESCRIPTION = underlying-symbol
ORIGINALMIC = ORIGINALMIC

[enrich-tags/legs]
EXDESTINATION = trading-venue
CURRENCY = price-currency
SECURITYTYPE = cfi-code
EUREX = eurex
LEGPUTORCALL = put-or-call
LEGEXCHANGECODE = liffe-exchangecode
LEGSIDE = side
LEGSTRIKEPRICE = strike-price
EXCHANGECODEETI = etilocalcode
LIFFE_DISPLAYPRECISION = displayprecision
LEGPRICE = legprice
LEGEXCHANGECODEETI = etilocalcode
STRIKEPRICE = strike-price
LEGMATURITYMONTHYEAR = maturity-date
OPTATTRIBUTE = time-issue
EXCHANGECODE = liffe-exchangecode
UNDERLINE.CODE = underlying-local-code
EUREX_CONTRACTVERSION = eurex-contractversion
ETILOCALCODE = etilocalcode
LEGRATIOQTY = ratio-quantity
LEGUNDERLINECODE = underlying-local-code
LIFFE = liffe
