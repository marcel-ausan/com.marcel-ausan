[rules]
rule_0 = underlying+expiration
rule_1 = underlying+maturitydate
rule_2 = NOCACHE - underlying+expiration
rule_3 = NOCACHE - underlying+maturitydate
rule_4 = FALLBACKSYMBOL (exchangecode via symbol)
rule_5 = NOCACHE - FALLBACKSYMBOL (exchangecode via symbol)

[rules/rule_0/properties]
type = standard

[rules/rule_0/result]
real_found = real
fungible_found = fungible

[rules/rule_0/search]
condition = if (true)
ULFLOW.request.plugin = ODS
ULFLOW.request.timeout = 100
SYMBOL = underlying-local-code
STRIKEPRICE = strike-price
PUTORCALL = cfi-code, mapping_0
MATURITYDATE = maturity-date-full
CURRENCY = price-currency
EXDESTINATION = trading-venue, mapping_1

[rules/rule_1/properties]
type = standard

[rules/rule_1/result]
real_found = real
fungible_found = fungible

[rules/rule_1/search]
condition = if (empty($MATURITYDATE) or length($MATURITYDATE) <> 8)
ULFLOW.request.plugin = ODS
ULFLOW.request.timeout = 100
SYMBOL = underlying-local-code
STRIKEPRICE = strike-price
PUTORCALL = cfi-code, mapping_0
MATURITYMONTHYEAR = maturity-date
CURRENCY = price-currency
EXDESTINATION = trading-venue, mapping_1

[rules/rule_2/properties]
type = standard

[rules/rule_2/result]
real_found = real
fungible_found = fungible

[rules/rule_2/search]
condition = if (true)
ULFLOW.request.plugin = ODSNOCACHE
ULFLOW.request.timeout = 1000
SYMBOL = underlying-local-code
STRIKEPRICE = strike-price
PUTORCALL = cfi-code, mapping_0
MATURITYDATE = maturity-date-full
CURRENCY = price-currency
EXDESTINATION = trading-venue, mapping_1

[rules/rule_3/properties]
type = standard

[rules/rule_3/result]
real_found = real
fungible_found = fungible

[rules/rule_3/search]
condition = if (empty($MATURITYDATE) or length($MATURITYDATE) <> 8)
ULFLOW.request.plugin = ODSNOCACHE
ULFLOW.request.timeout = 1000
SYMBOL = underlying-local-code
STRIKEPRICE = strike-price
PUTORCALL = cfi-code, mapping_0
MATURITYMONTHYEAR = maturity-date
CURRENCY = price-currency
EXDESTINATION = trading-venue, mapping_1

[rules/rule_4/properties]
type = standard

[rules/rule_4/result]
real_found = real
fungible_found = fungible

[rules/rule_4/search]
condition = if (true)
ULFLOW.request.plugin = ODS
ULFLOW.request.timeout = 100
FALLBACKSYMBOL = symbol
CURRENCY = price-currency
EXDESTINATION = trading-venue, mapping_1

[rules/rule_5/properties]
type = standard

[rules/rule_5/result]
real_found = real
fungible_found = fungible

[rules/rule_5/search]
condition = if (true)
ULFLOW.request.plugin = ODSNOCACHE
ULFLOW.request.timeout = 1000
FALLBACKSYMBOL = symbol
CURRENCY = price-currency
EXDESTINATION = trading-venue, mapping_1

[mappings]
mapping_0 = cficodeMapping
mapping_1 = exchangeMapping

[mapping/mapping_0]
call = OCXXXX|
put = OPXXXX|

[mapping/mapping_1]
LN = XLIF|IFEU|
MFM = XMRV|
LS = XLIS|
VI = WBAH|XWBO|
XNMS = XNAS|XNMS|
MI = XMIL|MTAA|ETFP|SEDX|
TCM = XTKS|
DE = XETR|
SGX = XSIM|
XFRA = XETR|
XMEF = XMRV|
MC = XMAD|XMCE|
EOE = XEUE|
EOP = XMON|XMAT|
US = OPRA|CBOE|
MX = XMEX|
UO = OPRA|XCBF|
COP = XCSE|XSTO|
XCME = XCME|XCBT|GLBX|XCEC|
UE = OPRA|XCBF|
SAF = XSAF|
MGE = XMGE|
NA = XEUE|
F = XFRA|
L = XLON|XLOM|AIMX|
XLON = XLOM|AIMX|
N = ARXC|XNYS|
O = XNAS|
I = XDUB|
J = XJSE|
NO = XOSL|
LIF = XLIF|IFEU|
NYM = XNYM|
CME = XCME|GLBX|
T = XTKS|
OL = XOSL|
P = XNYS|
S = XSWX|
FP = XMON|XMAT|
BDP = MFOX|
XNYM = XCEC|
Z = BATS|
FH = XHEL|
HE = XHEL|FNFI|
NYB = IFUS|
CMX = XCEC|
NYF = IFUS|
SSE = XSTO|
WA = XWAR|
ASX = XASX|
GR = XEUR|
EUX = XEUR|
VX = XVTX|
PA = XPAR|XMLI|ALXP|
HK = XHKF|XHKG|
RE = XBSE|
XCBO = XCBF|OPRA|
XLIF = XLIF|IFEU|
BFO = XBRD|
OBX = XOSL|
WCE = IFCA|
AT = XATH|
AS = XAMS|
IM = XDMI|
AU = XASX|
FNX = IFUS|
HEX = XHEL|
IS = XIST|
XPAR = XPAR|XMAT|XMON|
MSE = XMOD|
ECAG = XEUR|
PR = XPRA|
OSE = XOSE|
OSD = XOSL|
SFE = XSFE|NZFX|XASX|
JO = XOSE|
BR = XBRU|
BU = XBUD|
TO = XTSE|
NYSE_Liffe = XMAT|
JT = XTKS|
OPQ = OPRA|
IFLL = IFEU|
SS = XSTO|
ST = XSTO|FNSE|
MIL = XDMI|
BB = XBRD|
SW = XEUR|
CY = XCYS|
HKG = XHKF|
SF = XASX|
IFLX = IFEU|
DC = XCSE|
ICE = IFEU|
SM = XMRV|
SP = XSIM|
CBF = XCBF|
ICF = IFEU|
IFLO = IFEU|
CD = XASX|
TFX = XTKS|
CO = XCSE|XFND|
CBO = XCBO|
SA = XSAF|
CBT = XCBT|

[convert-currencies]
GBP = True
ILS = True
ZAR = True
USD = True
AUD = True

[enrich-tags]
EXPIRATIONDATE = idc-expiration-date
OPTATTRIBUTE = time-issue
ETILOCALCODE = etilocalcode
EXDESTINATION = trading-venue
EUREX_CONTRACTVERSION = eurex-contractversion
LEGEXCHANGECODEETI = etilocalcode
SYMBOL = symbol
MATURITYMONTHYEAR = maturity-date
LEGUNDERLINECODE = underlying-local-code
UNDERLYINGDESCRIPTION = underlying-symbol
ULTYPE = type
ORIGINALMIC = ORIGINALMIC
REALCODE = local-code
UNDERLINE.CODE = underlying-local-code
EUREX = eurex
INSTRUMENTEXPIRYDATE = maturity-date-full
LEGPRICE = legprice
EXCHANGECODEETI = etilocalcode
LIFFE = liffe
SECURITYEXCHANGE = trading-venue
EXCHANGECODE = liffe-exchangecode
CLOSINGPRICE = closing-price
ISINCODE = isin-code
PRODUCTCODE = product-code
ECHEANCE = echeance
ULCFICODE = cfi-code
STRIKEPRICE = strike-price
CURRENCY = price-currency
PUTORCALL = put-or-call
CFICODE = cfi-code
LEGEXCHANGECODE = liffe-exchangecode
LIFFE_DISPLAYPRECISION = displayprecision
SECURITYTYPE = security-type
INITIALMARGIN = margin-per-contract
