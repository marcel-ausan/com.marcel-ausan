[rules]
rule_0 = STANDARD
rule_1 = STANDARD-NOCACHE
rule_2 = FUTURE
rule_3 = STRAT
rule_4 = OPTIONS - FULL DATE
rule_5 = OPTIONS
rule_6 = FUTURE-NOCACHE
rule_7 = STRAT-NOCACHE
rule_8 = OPTIONS-NOCACHE

[rules/rule_0/properties]
type = standard

[rules/rule_0/result]
real_found = real
fungible_found = fungible

[rules/rule_0/search]
condition = if (true)
ULFLOW.request.plugin = ODS
ULFLOW.request.timeout = 100
EXCHANGECODE = symbol
EXDESTINATION = trading-venue, mapping_0

[rules/rule_1/properties]
type = standard

[rules/rule_1/result]
real_found = real
fungible_found = fungible

[rules/rule_1/search]
condition = if (true)
ULFLOW.request.plugin = ODSNOCACHE
ULFLOW.request.timeout = 5000
EXCHANGECODE = symbol
EXDESTINATION = trading-venue, mapping_0

[rules/rule_2/properties]
type = standard

[rules/rule_2/result]
real_found = real
fungible_found = next_rule

[rules/rule_2/search]
condition = if ($SECURITYTYPE="future")
ULFLOW.request.plugin = ODS
ULFLOW.request.timeout = 100
SYMBOL = underlying-instrument-code
EXDESTINATION = trading-venue, mapping_0
MATURITYMONTHYEAR = maturity-date
CFICODE = cfi-code

[rules/rule_3/properties]
type = standard

[rules/rule_3/result]
real_found = real
fungible_found = fungible

[rules/rule_3/search]
condition = if ($MULTILEGREPORTINGTYPE="multileg")
ULFLOW.request.plugin = ODS
ULFLOW.request.timeout = 100
EXDESTINATION = trading-venue, mapping_0
SECURITYID = symbol

[rules/rule_4/properties]
type = standard

[rules/rule_4/result]
real_found = real
fungible_found = fungible

[rules/rule_4/search]
condition = if ( startsWith(toUpperCase($SECURITYTYPE),"O"))
ULFLOW.request.plugin = ODS
ULFLOW.request.timeout = 100
SYMBOL = underlying-instrument-code
MATURITYDATE = maturity-date-full
STRIKEPRICE = strike-price
CFICODE = cfi-code
CURRENCY = price-currency
EXDESTINATION = trading-venue, mapping_0

[rules/rule_5/properties]
type = standard

[rules/rule_5/result]
real_found = real
fungible_found = fungible

[rules/rule_5/search]
condition = if ( startsWith(toUpperCase($SECURITYTYPE),"O"))
ULFLOW.request.plugin = ODS
ULFLOW.request.timeout = 100
SYMBOL = underlying-instrument-code
MATURITYMONTHYEAR = maturity-date
STRIKEPRICE = strike-price
CFICODE = cfi-code
CURRENCY = price-currency
EXDESTINATION = trading-venue, mapping_0

[rules/rule_6/properties]
type = standard

[rules/rule_6/result]
real_found = real
fungible_found = next_rule

[rules/rule_6/search]
condition = if ($SECURITYTYPE="future")
ULFLOW.request.plugin = ODSNOCACHE
ULFLOW.request.timeout = 5000
SYMBOL = underlying-instrument-code
EXDESTINATION = trading-venue, mapping_0
MATURITYMONTHYEAR = maturity-date
CFICODE = cfi-code

[rules/rule_7/properties]
type = standard

[rules/rule_7/result]
real_found = real
fungible_found = fungible

[rules/rule_7/search]
condition = if ($MULTILEGREPORTINGTYPE="multileg")
ULFLOW.request.plugin = ODSNOCACHE
ULFLOW.request.timeout = 5000
EXDESTINATION = trading-venue, mapping_0
SECURITYID = symbol

[rules/rule_8/properties]
type = standard

[rules/rule_8/result]
real_found = real
fungible_found = fungible

[rules/rule_8/search]
condition = if ( startsWith(toUpperCase($SECURITYTYPE),"O"))
ULFLOW.request.plugin = ODSNOCACHE
ULFLOW.request.timeout = 5000
SYMBOL = underlying-instrument-code
MATURITYMONTHYEAR = maturity-date, mapping_0
STRIKEPRICE = strike-price
CFICODE = cfi-code
CURRENCY = price-currency
EXDESTINATION = trading-venue, mapping_0

[mappings]
mapping_0 = EXDESTINATION mapping

[mapping/mapping_0]
IFLL = IFEU|
XMON = XMON|XMAT|
IFLX = IFEU|
XHKG = XHKG|XHKF|
XCBO = OPRA|
XSFE = XSFE|NZFX|
IFLO = IFEU|

[convert-currencies]
GBP = True
ILS = False
ZAR = False
USD = True
AUD = True

[enrich-tags]
INSTRUMENTID = odisys-instrument-id

[enrich-tags/legs]
MATUTIRITYMONTHYEAR = maturity-date
UNDERLYING = underlying-instrument-code
LEGREFID = leg-index
